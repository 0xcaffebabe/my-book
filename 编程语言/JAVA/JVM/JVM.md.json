{"content":"# JVM\n\n- 系统虚拟机\n- 软件虚拟机\n\n![批注 2020-07-10 083948](/assets/批注%202020-07-10%20083948.png)\n\nJVM是一种规范\n\nJDK14:<https://docs.oracle.com/javase/specs/jvms/se14/jvms14.pdf>\n\n## 常见JVM实现\n\n- Hotspot\n- Jrockit\n- J9\n\n越过操作系统的虚拟机：\n\n- LiquidVM\n- azul zing\n\n其他：\n\n- Apache Harmony\n- Android Dalvik\n- Microsoft JVM\n\n### 未来的趋势\n\n- GraalVM：将这些语言的源代码（例如JavaScript）或源代码编译后的中间格式（例如LLVM字节码）通过解释器转换为能被Graal VM接受的中间表示\n- Graal编译器：新一代即时编译器\n- Native化：提前编译\n- 功能越来越多：监控 调试\n- 语法特性持续增强\n\n## JDK JRE JVM\n\n![批注 2020-07-10 090055](/assets/批注%202020-07-10%20090055.png)\n\n## JVM 体系结构\n\n![202010510539](/assets/202010510539.png)\n\n- 类加载器\n- 内存区\n- 执行引擎\n\n基于栈的架构：\n\n- 平台无关 不同的平台寄存器各不相同\n- 基于栈的寄存器指令更加紧凑\n\n执行引擎的架构：\n\n![屏幕截图 2020-10-05 103533](/assets/屏幕截图%202020-10-05%20103533.png)\n\n执行引擎的执行过程：\n\n![屏幕截图 2020-10-05 105134](/assets/屏幕截图%202020-10-05%20105134.png)\n\n方法调用：\n\n执行方法调用指令时 会创建一个新栈帧 这个栈帧会存储传递过来的参数\n\n## 编译JDK\n\n- 安装依赖库\n\n```sh\napt install libfreetype6-dev\napt install libcups2-dev\napt install libx11-dev libxext-dev libxrender-dev libxrandr-dev libxtst-dev libxt-dev\napt install libasound2-dev\napt install libffi-dev\napt install autoconf\n```\n\n- 准备一个目标JDK-1的bootstrap jdk\n\n```sh\nsudo apt-get install openjdk-11-jdk\n```\n\n- 编译前配置与检查\n\n```sh\nbash configure --enable-debug --with-jvm-variants=server\n```\n\n- 开始编译\n\n```sh\nmake images\n```\n","commitList":[{"date":"2021-10-08T12:45:10+08:00","author":"cjiping","message":"doc开发期 构建期调整","hash":"704efe7455b7fb2fbd81ec60099191ff982e639a"},{"date":"2021-10-07T19:38:58+08:00","author":"My","message":"init","hash":"4e0456332231ba0523aa526415f9982377358870"}],"hasMoreCommit":false,"totalCommits":0}