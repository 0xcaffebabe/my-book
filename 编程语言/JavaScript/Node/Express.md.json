{"content":"# Express\n\nExpress是一个基于Node平台的web应用开发框架，它提供了一系列的强大特性，帮助你创建各种Web应用\n\n## 特性\n\n- 提供了方便简洁的路由定义方式\n- 对获取HTTP请求参数进行了简化处理\n- 对模板引擎支持程度高，方便渲染动态HTML页面\n- 提供了中间件机制有效控制HTTP请求\n- 拥有大量第三方中间件对功能进行扩展\n\n## 开始\n\n```js\nconst express = require('express')\nconst app = express()\n\napp.listen(80)\napp.get('/',(req,res)=>{\n    // 自动设置响应内容类型\n    res.send({name:'cxk',age:18}) \n})\n```\n\n## 中间件\n\n### next\n\n使用next继续传递请求\n\n```js\napp.get('/',(req,res,next)=>{\n    req.name = 'cxk'\n    next()\n})\napp.get('/',(req,res)=>{\n    res.send({name:req.name,age:18}) \n})\n```\n\n### use\n\n使用use接收任何类型方法的请求\n\n```js\napp.use('/any',(req,res,next)=>{\n    res.end('ok')\n})\n```\n\n可以用作过滤器\n\n404处理:\n\n```js\napp.use((req,res,next)=>{\n    res.status(404).send('not found')\n})\n```\n\n错误处理：\n\n```js\napp.use('/any',(req,res,next)=>{\n    throw Error('RuntimeException')\n})\napp.use((error,req,res,next)=>{\n    res.status(500).send(\"SERVER INTERNAL ERROR:\"+error)\n})\n```\n\n当发生错误的中间件是异步函数是，需要手动捕捉错误，调用next\n\n```js\napp.use('/any',async (req,res,next)=>{\n    try{\n        throw Error('RuntimeException')\n    }catch(e){\n        next(e)\n    }\n})\n```\n\n## 模块化路由\n\n```js\nconst home = express.Router()\nconst admin = express.Router()\n\napp.use('/home',home)\napp.use('/admin',admin)\n\nhome.get('/index',(req,res)=>{\n    res.send('前台首页')\n})\nadmin.get('/index',(req,res)=>{\n    res.send('后台首页')\n})\n```\n\n## 参数获取\n\n- get请求\n\n```js\nreq.query\n```\n\n- post请求\n\n```js\nconst bodyParser = require('body-parser')\napp.use(bodyParser.urlencoded({extended:false}))\napp.post('/',(req,res)=>{\n    res.send(req.body)\n})\n```\n\n- 路由参数\n\n请求:http://localhost/1\n\n```js\napp.get('/:id',(req,res)=>{\n    res.send(req.params) // {id:1}\n})\n```\n\n## 静态资源处理\n\n```js\napp.use(express.static('static'))\n```\n\n## 整合art-template\n\n```js\n// app.use(express.static('static'))\n// 当渲染后缀为art的模板时，使用express-art-template\napp.engine('art',require('express-art-template'))\n// 设置模板目录\napp.set('views',path.join(__dirname,'views'))\n// 设置模板后缀\napp.set('view engine','art')\napp.get('/',(req,res)=>{\n    // 渲染模板\n    res.render('index',{\n        content:'jntm'\n    })\n})\n```\n\n- 模板公共数据\n\n```js\napp.locals.common = {\n    name: 'site'\n}\n```","commitList":[{"date":"2021-10-08T12:45:10+08:00","author":"cjiping","message":"doc开发期 构建期调整","hash":"704efe7455b7fb2fbd81ec60099191ff982e639a"},{"date":"2021-10-07T19:38:58+08:00","author":"My","message":"init","hash":"4e0456332231ba0523aa526415f9982377358870"}],"hasMoreCommit":false,"totalCommits":0}